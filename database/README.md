# 学生成绩管理系统 - Mock数据说明

## 📋 数据文件说明

### 1. `init-database.sql` - 完整数据库初始化
- **用途**: 完整的数据库表结构创建 + 丰富的测试数据
- **数据量**: 
  - 14个用户（1个管理员 + 3个教师 + 10个学生）
  - 10门课程
  - 38条成绩记录
  - 3个时间段配置
- **适用场景**: 完整功能测试、性能测试

### 2. `quick-test-data.sql` - 快速联调数据
- **用途**: 最小数据集，用于快速前后端联调
- **数据量**:
  - 3个用户（1个管理员 + 1个教师 + 1个学生）
  - 3门课程
  - 5条成绩记录
  - 1个时间段配置
- **适用场景**: 快速联调、基础功能验证

### 3. `mock-data.sql` - 详细Mock数据
- **用途**: 详细的测试数据，包含验证查询
- **数据量**: 与init-database.sql相同
- **特点**: 包含数据验证查询语句

## 🚀 快速开始

### 方法一：使用快速测试数据（推荐用于联调）

```bash
# 1. 确保数据库已创建
mysql -u root -p your_database_name

# 2. 执行快速测试数据
source database/quick-test-data.sql
```

### 方法二：使用完整数据库初始化

```bash
# 1. 创建数据库
mysql -u root -p -e "CREATE DATABASE student_grade_system CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;"

# 2. 执行完整初始化
mysql -u root -p student_grade_system < database/init-database.sql
```

## 👥 测试账号

### 快速测试数据账号
| 角色 | 用户名 | 密码 | 说明 |
|------|--------|------|------|
| 管理员 | admin | admin123 | 系统管理员 |
| 教师 | teacher01 | teacher123 | 张老师，教授3门课程 |
| 学生 | student01 | student123 | 张三，有5条成绩记录 |

### 完整数据账号（部分）
| 角色 | 用户名 | 密码 | 说明 |
|------|--------|------|------|
| 管理员 | admin | admin123 | 系统管理员 |
| 教师 | teacher01 | teacher123 | 张教授，教授Java、数据结构、数据库 |
| 教师 | teacher02 | teacher123 | 李老师，教授网络、软件工程、Web开发 |
| 教师 | teacher03 | teacher123 | 王老师，教授高等数学、线性代数 |
| 学生 | student01 | student123 | 张三，计科2201班 |
| 学生 | student02 | student123 | 李四，计科2201班 |
| ... | ... | ... | 共10个学生 |

## 📊 数据概览

### 课程信息
- **CS101**: Java程序设计 (3学分)
- **CS102**: 数据结构与算法 (4学分)
- **CS103**: 数据库系统原理 (3学分)
- **CS104**: 计算机网络 (3学分)
- **CS105**: 软件工程 (3学分)
- **MATH101**: 高等数学 (4学分)
- **MATH102**: 线性代数 (3学分)
- **CS106**: Web开发技术 (3学分)
- **CS107**: 操作系统 (3学分)
- **CS108**: 编译原理 (3学分)

### 成绩等级规则
- **A**: 90-100分 (优秀)
- **B**: 80-89分 (良好)
- **C**: 70-79分 (中等)
- **D**: 60-69分 (及格)
- **F**: 0-59分 (不及格)

### 时间段配置
- **2025春季学期成绩查询**: 2025-01-01 到 2025-12-31 (激活)
- **2025秋季学期成绩查询**: 2025-06-01 到 2025-12-31 (激活)
- **2024春季学期成绩查询**: 2024-01-01 到 2024-12-31 (未激活)

## 🔧 联调测试场景

### 1. 登录测试
- 测试不同角色的登录
- 验证JWT token生成
- 测试权限控制

### 2. 学生功能测试
- 查询个人成绩
- 查看个人信息
- 测试时间段限制

### 3. 教师功能测试
- 查看我的课程
- 查询学生成绩（带权限控制）
- 批量导入成绩
- 设置课程时间段

### 4. 管理员功能测试
- 学生管理
- 教师管理
- 课程管理
- 时间段管理

### 5. 成绩查询测试
- 按学期查询
- 按学年查询
- 权限验证
- 时间段验证

## 📝 注意事项

1. **密码加密**: 所有密码都使用BCrypt加密，实际密码为 `admin123`、`teacher123`、`student123`
2. **ID冲突**: 如果数据库已有数据，请先清空相关表或调整ID
3. **外键约束**: 系统使用逻辑外键，无物理外键约束
4. **时间格式**: 使用MySQL TIMESTAMP格式
5. **字符编码**: 使用utf8mb4编码支持中文

## 🐛 常见问题

### Q: 执行SQL时出现重复键错误
A: 使用 `ON DUPLICATE KEY UPDATE` 语句，或先清空相关表

### Q: 中文显示乱码
A: 确保数据库和表都使用utf8mb4编码

### Q: 登录失败
A: 检查密码是否正确，确认BCrypt加密配置

### Q: 权限验证失败
A: 检查JWT token解析和角色验证逻辑

## 📞 技术支持

如有问题，请检查：
1. 数据库连接配置
2. JWT密钥配置
3. 密码加密配置
4. 权限验证逻辑
